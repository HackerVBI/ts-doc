# Управление процессором

TS конфигурация позволяет изменять частоту работы процессора и управлять кэшированием запросов в RAM. Основным регистром управления является **SysConfig**. По сигналу RESET в него записывается значение $01 - кэширование отключено, частота работы процессора 7MHz.

##### Регистр SysConfig
	Биты 7  6  5  4  3   2     1     0
         -  -  -  -  - CACHE ZCLK1 ZCLK0
	R/W                  W     W     W
	Init x  x  x  x  x   0     0     1

* Биты 0-1 - управление частотой процессора,
* Бит 2 - разрешение кэширования запросов в RAM,
* Биты 3-7 - зарезервированы.

### Изменение частоты работы процессора <a name="clock"></a>

Всего поддерживается 4 режима работы процессора: 3.5MHz, 7.0MHz, 14.0MHz normal (обычный режим), 14.0MHz overclock (разогнанный режим). Два младших бита регистра **SysConfig** позволяют выбрать один из этих четырех режимов согласно следующей таблице:

ZCLK1|ZCLK0| MHz
-----|-----|----
0    |0    |3.5
0    |1    |7.0
1    |0    |14.0 normal
1    |1    |14.0 overclock

**Внимание!** Режим 14.0Mhz overclock на некоторых машинах может работать нестабильно.  

### Кэширование запросов в RAM <a name="cache"></a>

Бит *CACHE* регистра **SysConfig** позволяет включить кэширование запросов в RAM: 0 - кэширование отключено, 1 - кэширование включено.

Кэширование может быть включено не только для всей области RAM, но и для каждого 16 килобайтного окна. Регистр **CacheConfig** содержит биты для управление кэшированием индивидуального окна: 0 - кэширование отключено, 1 - кэширование включено.

При записи значения в бит *CACHE* регистра **SysConfig** это же значение копируется в биты 0-3 регистра **CacheConfig**.

##### Регистр CacheConfig
	Биты 7  6  5  4    3       2       1       0
         -  -  -  - EN_C000 EN_8000 EN_4000 EN_0000
	R/W                W       W       W       W
	Init x  x  x  x    0       0       0       0

* Бит 0 - разрешение кэширования окна RAM $0000-$3FFF,
* Бит 1 - разрешение кэширования окна RAM $4000-$7FFF,
* Бит 2 - разрешение кэширования окна RAM $8000-$BFFF,
* Бит 3 - разрешение кэширования окна RAM $C000-$FFFF,
* Биты 4-7 - зарезервированы.
